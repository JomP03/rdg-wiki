@startuml Process View - Level 3

autonumber
skinparam packageStyle rect

title Create Floor

participant "Node Backend" as BE <<component>>
database "Mongo DataBase" as DB <<component>>

-> BE: POST floors/{domainId?: domainId, buildingId: buildingId, \n floorNumber: floorNumber, floorDescription?: floorDescription}

'Find by Building ID'

activate BE

BE -> DB: find by building id

activate DB

DB --> BE:

deactivate DB

alt building not found

  <-- BE: Response status code - 404

else database unavailable

  <-- BE: Response status code - 503

end


'Find by Floor ID'

activate BE

BE -> DB: find by floor id

activate DB

DB --> BE:

deactivate DB

alt floor already exists

  <-- BE: Response status code - 409

else database unavailable

  <-- BE: Response status code - 503

end


'Find By Floor Number And Building Id'

activate BE

BE -> DB: find by floor number and building id

activate DB

DB --> BE:

deactivate DB

alt floor already exists

  <-- BE: Response status code - 409

else database unavailable

  <-- BE: Response status code - 503

end


activate BE

BE -> DB: save

activate DB

DB --> BE:

deactivate DB

alt floor persisted

  <-- BE: Response status code - 201

else database unavailable

  <-- BE: Response status code - 503

end

@enduml