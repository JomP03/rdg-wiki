@startuml Process View - Level 3

autonumber
skinparam packageStyle rect

title Create Room

participant "Back-End" as BE <<component>>
database "DataBase" as DB <<component>>

-> BE: POST room/{domainId?: domainId, name: buildingId, \n description: floorNumber, category?: floorDescription, \n dimensions: dimensions, doorPosition: doorPosition, floorId: floorId}

alt user autothorized

'Find by Room ID'

activate BE

BE -> DB: find by room id

activate DB

DB --> BE:

deactivate DB

alt room with given id already exists

  <-- BE: Response status code - 409

else database unaveilable

  <-- BE: Response status code - 503

end


'Find by Floor ID'

activate BE

BE -> DB: find by floor id

activate DB

DB --> BE:

deactivate DB

alt floor already exists

  <-- BE: Response status code - 409

else database unaveilable

  <-- BE: Response status code - 503

end


'Find By Name'

activate BE

BE -> DB: find by name

activate DB

DB --> BE:

deactivate DB

alt room with given name already exists

  <-- BE: Response status code - 409

else database unaveilable

  <-- BE: Response status code - 503

end



'Check if Room exists in give area'

activate BE

BE -> DB: check if room exists in given area

activate DB

DB --> BE:

deactivate DB

alt room exists in given area

  <-- BE: Response status code - 400

else database unaveilable

  <-- BE: Response status code - 503

end


'Save'

activate BE

BE -> DB: save

activate DB

DB --> BE:

deactivate DB

alt room persisted

  <-- BE: Response status code - 201

else database unaveilable

  <-- BE: Response status code - 503

end

else user unauthorized

  <-- BE: Response status code - 401

end

@enduml